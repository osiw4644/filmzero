<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{body}" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<th:block layout:fragment="css">
  <link rel="stylesheet" th:href="@{/css/common.css}" />
  <link rel="stylesheet" th:href="@{/css/movieInfo.css}" />
  <link rel="stylesheet" th:href="@{/css/starRate.css}" />
</th:block>
<th:block layout:fragment="script">
  <script th:src="@{/js/common.js}"></script>
  <script th:src="@{/js/movieInfo.js}"></script>
</th:block>
<div layout:fragment="content">
  <body>
  <div  th:each="minfo: ${movieList}">
    <main class="main neo infoMain">
      <div class="container" id="top">
        <!-- 탑 섹션 -->
        <section class="topSection">
          <div class="contentWrap">
            <div class="imgBox">
              <img th:src="${minfo.movieBackground}" />
            </div>
            <p th:text="${minfo.id}"></p>
            <div class="contentBox">
              <div class="txtBox">
                <div class="titleWrap" >
                  <!--영화제목-->
                  <h2 class="title neoT" th:text="${minfo.movieNm}"></h2>
                </div>

                <div class="infoBox">
                  <ul class="released">
                    <li class="date">
                      <!--개봉일-->
                      <p th:text="${minfo.openDt}"></p>
                    </li>
                    <li class="country">
                      <!-- 제작국가-->
                      <p th:text="${minfo.nationNm}"></p>
                    </li>
                  </ul>

                  <ul class="genre">
                    <!--장르-->
                    <li th:text="${minfo.genreNm}"></li>
                  </ul>
                </div>
              </div>
              <div class="posterBox">
                <!--메인포스터-->
                <img th:src="${minfo.movieImg_main}" />
              </div>
            </div>
          </div>
        </section>

        <!-- 평가 섹션 -->
        <section class="section rateSection">
          <div class="contentWrap">
            <div class="rateInfo">
              <div class="infoBox neo">
                <h2>평점 평균</h2>
                <div class="infoContent">
                  <i class="bi bi-star-half"></i>
                  <div class="txtBox">
                    <p class="neoT" th:text="${minfo.star_avg}"></p>
                    <p class="subtxt">/5점</p>
                  </div>
                </div>
              </div>

              <div class="infoBox neo">
                <h2>누적 관객</h2>
                <div class="infoContent">
                  <i class="bi bi-people"></i>

                  <div class="txtBox">
                    <p class="neoT audience" th:text="${minfo.audiAcc}"></p>
                    <p class="subtxt">명</p>
                  </div>
                </div>
              </div>


              <div class="infoBox neo">
                <h2>누적매출액</h2>
                <div class="infoContent">
                  <i class="bi bi-cash-coin"></i>
                  <div class="txtBox">
                    <p class="neoT" th:text="${minfo.salesAcc}"></p>
                    <p class="subtxt">원</p>
                  </div>
                </div>
              </div>

            </div>

            <div class="myRate">
              <div>
                <h2>평가하기</h2>
              </div>

              <div class="rateBox">
                <div class="rating">
                  <input
                          type="radio"
                          id="star5"
                          name="rating"
                          value="5"
                  /><label
                        class="full"
                        for="star5"
                        title="Awesome - 5 stars"
                ></label>
                  <input
                          type="radio"
                          id="star4half"
                          name="rating"
                          value="4.5"
                  /><label
                        class="half"
                        for="star4half"
                        title="Pretty good - 4.5 stars"
                ></label>
                  <input
                          type="radio"
                          id="star4"
                          name="rating"
                          value="4"
                  /><label
                        class="full"
                        for="star4"
                        title="Pretty good - 4 stars"
                ></label>
                  <input
                          type="radio"
                          id="star3half"
                          name="rating"
                          value="3.5"
                  /><label
                        class="half"
                        for="star3half"
                        title="Meh - 3.5 stars"
                ></label>
                  <input
                          type="radio"
                          id="star3"
                          name="rating"
                          value="3"
                  /><label
                        class="full"
                        for="star3"
                        title="Meh - 3 stars"
                ></label>
                  <input
                          type="radio"
                          id="star2half"
                          name="rating"
                          value="2.5"
                  /><label
                        class="half"
                        for="star2half"
                        title="Kinda bad - 2.5 stars"
                ></label>
                  <input
                          type="radio"
                          id="star2"
                          name="rating"
                          value="2"
                  /><label
                        class="full"
                        for="star2"
                        title="Kinda bad - 2 stars"
                ></label>
                  <input
                          type="radio"
                          id="star1half"
                          name="rating"
                          value="1.5"
                  /><label
                        class="half"
                        for="star1half"
                        title="Meh - 1.5 stars"
                ></label>
                  <input
                          type="radio"
                          id="star1"
                          name="rating"
                          value="1"
                  /><label
                        class="full"
                        for="star1"
                        title="Sucks big time - 1 star"
                ></label>
                  <input
                          type="radio"
                          id="starhalf"
                          name="rating"
                          value="0.5"
                  /><label
                        class="half"
                        for="starhalf"
                        title="Sucks big time - 0.5 stars"
                ></label>
                </div>
                <div class="scoreBox"></div>
              </div>
            </div>

            <div class="comement">
              <div class="comementBox">
                <p>좋은 평가네요! 이 작품에 대한 평가를 글로 남겨보세요.</p>
                <a href="/member/logins" sec:authorize="isAnonymous()" class="commentBtn">로그인 하기</a>
                <div sec:authorize="isAuthenticated()" class="commentBtn">코멘트 남기기</div>
              </div>
            </div>

            <!-- 내 코멘트 출력 -->
            <div class="myComment">
              <div class="commentWrap">
                <div class="imgBox">
                  <img src="/image/profileEX.jpg" />
                </div>
                <p>내용</p>
                <div class="btnBox">
                  <div class="modiBtn pointer">
                    <i class="bi bi-pencil-square"></i>수정
                  </div>
                  <div class="delBtn pointer">
                    <i class="bi bi-trash"></i>삭제
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- 코멘트 입력 (모달창) -->
        <form action="/movie/save" method="post" onsubmit="return save();">
          <input type="hidden" id="member_id" name="member_id" value="${memberFormDto.id}">
          <div class="commentInput">
            <div class="inputBox">
              <div class="commentTop">
                <div class="neoT">코멘트 남기기</div>
                <div class="closeBtn"><i class="bi bi-x-lg"></i></div>
              </div>
              <textarea
                      name="movieCommentWriter"
                      id="comment"
                      placeholder="내용을 입력해주세요."
              ></textarea>
              <div class="inputBottom">
                <div class="cntBox">
                  <p class="textCnt neoB"></p>
                  <p>/1000자</p>
                </div>
                <button type="submit" class="saveBtn">저장</button>
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
              </div>
            </div>
          </div>
        </form>

        <!-- 코멘트 섹션 -->
        <!-- 맨 처음과 맨 앞 슬라이더에서 버튼 숨기는 법 찾아보기 -->
        <section class="section commentSection">
          <div class="contentWrap">
            <div class="titleBox">
              <h2 class="jal">코멘트</h2>
              <div class="more">
                <p>
                  <a href="/movie/comment">더보기</a>
                </p>
              </div>
            </div>

            <!-- 코멘트 슬라이드-->
            <!-- 좋아요 수를 기준으로 상위 12개만 표시-->
            <!-- 예시 영역임 / 클래스명 변경 XXX -->
            <div class="slide">
              <!-- 슬라이드 버튼 -->
              <div class="btnBox">
                <div class="btn preBtn preBtn1">
                  <i class="bi bi-caret-left-fill"></i>
                </div>
                <div class="btn nextBtn nextBtn1">
                  <i class="bi bi-caret-right-fill"></i>
                </div>
              </div>

              <!-- 슬라이드 시작 -->
              <div  class="swiper-container commentContainer">
                <div class="swiper-wrapper commentWrapper">

                  <div th:each="MovieDto: ${movieCommentList}" class="swiper-slide commentSlide">
                    <div class="commentBox">
                      <div class="userBox">
                        <div class="userImg">
                          <img src="/image/profileEX.jpg" />
                        </div>
                        <p th:text="${MovieDto.MovieCommentWriter}" class="userNick"></p>
                      </div>
                      <div class="commentContent">
                        <p th:text="${MovieDto.movieNickname}">
                        </p>
                      </div>
                      <div class="socialBox">
                        <div class="heartBtn pointer">
                          <i class="bi bi-suit-heart-fill"></i>
                          <span></span>
                        </div>
                        <div class="recommentBtn pointer">
                          <i class="bi bi-chat-dots-fill"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


            </div>
          </div>

        </section>

        <!-- 정보 섹션 -->
        <section class="section infoSection">
          <div class="contentWrap">
            <div class="titleBox">
              <h2 class="jal">기본정보</h2>
              <div class="more">
                <a th:href="@{|/movie/movieMore/${minfo.id}}">
                  <p>자세히 보기</p>
                </a>
              </div>
            </div>

            <div class="contentBox">
              <p class="title" th:text="${minfo.movieNm}"></p>
              <ul class="flexList">
                <li class="date" th:text="${minfo.openDt}"></li>
                <l class="dot">·</l>
                <li class="country" th:text="${minfo.nationNm}"></li>
              </ul>
              <ul class="flexList">
                <li class="time" th:text="${minfo.showTm}"></li>
                <l class="dot">·</l>
                <li class="grade" th:text="${minfo.watchGrade}"></li>
              </ul>

              <textarea class="story neo" th:text="${minfo.storyInfo}"  readonly>
              </textarea>
            </div>
          </div>
        </section>

        <!-- 스태프 섹션 -->
        <section class="section staffSection">
          <div class="contentWrap">
            <div class="titleBox">
              <h2 class="jal">제작/출연</h2>
            </div>

            <!-- 예시 영역임 / 클래스명 수정 XXX -->
            <div class="staffContent">
              <div class="staffBox" th:each="ainfo : ${actorList}">
                <div class="flexBox">
                  <div class="staffImg">
                    <img th:src="@{/image/staffEX/1.jpg}" />
                  </div>
                  <div class="staffInfo">
                    <p class="staffName" th:text="${ainfo.actorNm}"></p>
                    <p class="role" th:text="${ainfo.castNm}"></p>
                  </div>
                </div>
              </div>
            </div>


          </div>
        </section>

<!--        &lt;!&ndash; 트레일러 섹션 &ndash;&gt;-->
<!--        <section class="section trailerSetion">-->
<!--          <div class="contentWrap">-->
<!--            <div class="titleBox">-->
<!--              <h2 class="jal">트레일러</h2>-->
<!--            </div>-->

<!--            &lt;!&ndash; 슬라이드 시작 &ndash;&gt;-->
<!--            &lt;!&ndash; 예시 영역 &ndash;&gt;-->
<!--            <div class="slide">-->
<!--              &lt;!&ndash; 슬라이드 버튼 &ndash;&gt;-->
<!--              <div class="btnBox">-->
<!--                <div class="btn preBtn preBtn2">-->
<!--                  <i class="bi bi-chevron-left"></i>-->
<!--                </div>-->
<!--                <div class="btn nextBtn nextBtn2">-->
<!--                  <i class="bi bi-chevron-right"></i>-->
<!--                </div>-->
<!--              </div>-->

<!--              <div class="swiper-container trailerContainer">-->
<!--                <div class="swiper-wrapper trailerWrapper">-->
<!--                  <div class="swiper-slide trailerSlide">-->
<!--                    &lt;!&ndash; 썸네일 가져오기 &ndash;&gt;-->
<!--                    &lt;!&ndash; https://img.youtube.com/vi/ (+id+) /mqdefault.jpg &ndash;&gt;-->
<!--                    <div class="imgBox">-->
<!--                      <img-->
<!--                              src="https://img.youtube.com/vi/x1Y_pud2_FY/mqdefault.jpg"-->
<!--                      />-->
<!--                      <div class="button">-->
<!--                        <a href="https://youtu.be/x1Y_pud2_FY" target="_blank"-->
<!--                        ><i class="bi bi-caret-right-fill"></i-->
<!--                        ></a>-->
<!--                      </div>-->
<!--                    </div>-->
<!--                    <div class="txtBox">-->
<!--                      <p>첫번째 예고편</p>-->
<!--                    </div>-->
<!--                  </div>-->


<!--                </div>-->
<!--              </div>-->
<!--            </div>-->
<!--            &lt;!&ndash; 슬라이드 종료 &ndash;&gt;-->
<!--          </div>-->
<!--        </section>-->

<!--        &lt;!&ndash; 갤러리 섹션 &ndash;&gt;-->
<!--        <section class="section GallerySeiton">-->
<!--          <div class="contentWrap">-->
<!--            <div class="titleBox">-->
<!--              <h2 class="jal">갤러리</h2>-->
<!--            </div>-->

<!--            &lt;!&ndash; 슬라이드 시작 &ndash;&gt;-->
<!--            &lt;!&ndash; 예시 영역 &ndash;&gt;-->
<!--            <div class="slide">-->
<!--              &lt;!&ndash; 슬라이드 버튼 &ndash;&gt;-->
<!--              <div class="btnBox">-->
<!--                <div class="btn preBtn preBtn3">-->
<!--                  <i class="bi bi-chevron-left"></i>-->
<!--                </div>-->
<!--                <div class="btn nextBtn nextBtn3">-->
<!--                  <i class="bi bi-chevron-right"></i>-->
<!--                </div>-->
<!--              </div>-->

<!--              <div class="swiper-container galleryContainer">-->
<!--                <div class="swiper-wrapper galleryWrapper">-->
<!--                  <div class="swiper-slide galleryslide">-->
<!--                    <div class="imgBox">-->
<!--                      <img src="/image/galleryEX/1.jpg" />-->
<!--                    </div>-->
<!--                  </div>-->


<!--                </div>-->
<!--              </div>-->
<!--            </div>-->
<!--            &lt;!&ndash; 슬라이드 종료 &ndash;&gt;-->

<!--            <div class="modal">-->
<!--              <div class="modalClose">-->
<!--                <i class="bi bi-x-lg"></i>-->
<!--              </div>-->

<!--              &lt;!&ndash; 모달 슬라이드 시작 &ndash;&gt;-->
<!--              <div class="slide">-->
<!--                &lt;!&ndash; 슬라이드 버튼 &ndash;&gt;-->
<!--                <div class="btnBox">-->
<!--                  <div class="btn preBtn preBtn4">-->
<!--                    <i class="bi bi-chevron-left"></i>-->
<!--                  </div>-->
<!--                  <div class="btn nextBtn nextBtn4">-->
<!--                    <i class="bi bi-chevron-right"></i>-->
<!--                  </div>-->
<!--                </div>-->
<!--                <div class="contentWrap">-->
<!--                  <div class="swiper-container modalContainer">-->
<!--                    <div class="swiper-wrapper modalWrapper">-->
<!--                      <div class="swiper-slide modalSlide">-->
<!--                        <div class="imgBox">-->
<!--                          <img src="/image/galleryEX/1.jpg" />-->
<!--                        </div>-->
<!--                      </div>-->

<!--                    </div>-->
<!--                  </div>-->
<!--                </div>-->
<!--              </div>-->
<!--              &lt;!&ndash; 모달 슬라이드 종료 &ndash;&gt;-->
<!--            </div>-->
<!--          </div>-->
<!--        </section>-->

            <!-- 컬렉션 섹션 -->
            <!-- 산출방식 정해서 4개까지 출력 -->
            <section class="section CollectionSection">
              <div class="contentWrap">
                <div class="titleBox">
                  <h2 class="jal">이 작품이 포함된 컬렉션</h2>
                </div>

                <div class="collectionWrap">

                  <div class="collectionBox">
                    <a href="/collection/star">
                      <div class="imgBox">
                        <img
                                th:src="@{https://t1.daumcdn.net/movie/7c29e6819af620bde9448554d9376fb61bde9d18}"
                                alt="컬렉션 썸네일"
                        /><img
                              th:src="@{http://img.movist.com/?img=/x00/05/42/65_p1.jpg}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{http://img.movist.com/?img=/x00/05/40/66_p1.jpg}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{http://img.movist.com/?img=/x00/05/53/22_p1.jpg}"
                              alt="컬렉션 썸네일"
                      />
                      </div>

                      <div class="txtBox">
                        <p>믿고보는 영화러버들의 선택 별점왕시리즈</p>
                      </div>
                    </a>
                  </div>

                  <div class="collectionBox">
                    <a href="/collection/audi">
                      <div class="imgBox">
                        <img
                                th:src="@{http://img.movist.com/?img=/x00/05/11/49_p1.jpg}"
                                alt="컬렉션 썸네일"
                        /><img
                              th:src="@{https://t1.daumcdn.net/movie/5d3c3e6f0e2078681fb0f1a17240e901a8638bd3}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{http://img.movist.com/?img=/x00/00/73/84_p1.jpg}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{https://t1.daumcdn.net/movie/a8bb59792be27ba3f51b20b427873611e15e1c1d}"
                              alt="컬렉션 썸네일"
                      />
                      </div>
                      <div class="txtBox">
                        <p>누적관객 보장 믿고보는 시리즈</p>
                      </div>
                    </a>
                  </div>

                  <div class="collectionBox">
                    <a href="/collection/ani">
                      <div class="imgBox">
                        <img
                                th:src="@{https://t1.daumcdn.net/movie/1eef5d86e3c1771cf119e5ad96fe4c5540ed378a}"
                                alt="컬렉션 썸네일"
                        /><img
                              th:src="@{http://img.movist.com/?img=/x00/05/15/22_p1.jpg}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{http://img.movist.com/?img=/x00/05/74/59_p1.jpg}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{https://t1.daumcdn.net/movie/3cea7130cd9af437f24406c9c67768dcd50cf4d9}"
                              alt="컬렉션 썸네일"
                      />
                      </div>

                      <div class="txtBox">
                        <p>더 빠져들 수 밖에 애니메이션</p>
                      </div>
                    </a>
                  </div>

                  <div class="collectionBox">
                    <a href="/collection/action">
                      <div class="imgBox">
                        <img
                                th:src="@{http://img.movist.com/?img=/x00/05/62/00_p1.jpg}"
                                alt="컬렉션 썸네일"
                        /><img
                              th:src="@{http://img.movist.com/?img=/x00/05/68/20_p1.jpg}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{https://t1.daumcdn.net/movie/36f22dea0e0a9e0e626c549ce689558160c46ed4}"
                              alt="컬렉션 썸네일"
                      /><img
                              th:src="@{https://t1.daumcdn.net/movie/2032840c034ca7a2536b55adabb0e8a5ca99dd83}"
                              alt="컬렉션 썸네일"
                      />
                      </div>

                      <div class="txtBox">
                        <p>베를린 영화제 액션짱상</p>
                      </div>
                    </a>
                  </div>

                </div>
              </div>
            </section>


        <!-- 비슷한 영화 섹션 -->
        <!-- 산출 방법 정해서 10개 까지 출력 -->
<!--        <section class="section anotherSection">-->
<!--          <div class="contentWrap">-->
<!--            <div class="titleBox">-->
<!--              <h2 class="jal">비슷한 영화</h2>-->
<!--            </div>-->

<!--            <div class="anotherWrap">-->
<!--              <div class="movieBox">-->
<!--                <div class="imgBox">-->
<!--                  <img src="/image/collectionEX/거꾸로된파티마.jpg" />-->
<!--                </div>-->

<!--                <div class="txtB">-->
<!--                  <p class="title">거꾸로된 파테마</p>-->
<!--                </div>-->
<!--              </div>-->

<!--            </div>-->
<!--          </div>-->
<!--        </section>-->
      </div>
    </main>

    <div class="bottomUtill">
      <div class="localBtn pointer">
        <i class="bi bi-geo-alt-fill"></i>
      </div>

      <div class="utillBtn pointer topBtn">
        <a href="#top"><i class="bi bi-arrow-up"></i></a>
      </div>

      <div class="utillBtn pointer eventBtn">
        <a href="/event/game"><i class="bi bi-calendar-check"></i></a>
      </div>

      <div class="utillBtn pointer inquiryBtn">
        <a href="/board/inquiry"><i class="bi bi-question-lg"></i></a>
      </div>
    </div>
  </div>
  </body>
</div>
</html>